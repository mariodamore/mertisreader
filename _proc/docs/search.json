[
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "Quick Install",
    "section": "",
    "text": "I advise to use a pytohn virtual environment /conda environment.\nEasy way, install the mertisreader package from pypi :\nLatest changes :\nClone the https://github.com/mariodamore/mertisreader and install as editable it using pip.\nThe code is under active development, this enable to pull the last code with git pull and have this directly enabled in your environment."
  },
  {
    "objectID": "index.html#mertisreader---quick-cheatsheet",
    "href": "index.html#mertisreader---quick-cheatsheet",
    "title": "Quick Install",
    "section": "mertisreader - Quick cheatsheet",
    "text": "mertisreader - Quick cheatsheet\nImport Required Libraries\n\nimport pathlib\nimport rich\nimport mertisreader as mr\n\nprint(\"Libraries imported successfully.\")\n\nLibraries imported successfully.\n\n\nInitialize MERTISDataPackReader\nInitialize the MERTISSessionReader with the input directory and optional parameters for output directory and log level.\nThe ../data/ contains a subset of the Moon flyby , technically called Earth Gravity Assist (EGA).\nThe directory name reflects ESA-PSA/PDS4 naminhc scheme and the start / stop data acquistion , plus the data pack creation.\nUnder this, there the different data levels :\n\n\n\n\n\n\n\n\n\n\nLevel\nUnits\nGeometry\nCalibration Targets\nTIS Aligned\n\n\n\n\nraw\nDigital Numbers\nNo\nNo\nNo\n\n\npar\nPhysical Units\nYes\nYes\nNo\n\n\ncal\nPhysical Units\nYes\nNo\nYes\n\n\n\n\nCalibration Target : if the currnet level contains calibration target measurements or only scientifically relevant one.\nTIS Aligned: : the TIS (Thermal Infrared Spectrometer) wavelength grid is aligned with the detectorâ€™s X and Y axes, so all pixels share the same wavelength grid. If not aligned, each pixel has its own wavelength grid, making data comparison and analysis more complex.\n\nJust change the level directory, the package can handle all the level\n\ninput_path = pathlib.Path('../data/bcmer_tm_all_START-20200409T000000_END-20200410T000000_CRE-20240717T132010-ParamEventBootSciHK-short/cal')\noutput_path = pathlib.Path('/tmp/')\nlog_level = 'INFO'\n\nif not input_path.exists():\n    print(f\"Input path {input_path} does not exist.\")\nelse:\n    print(f\"Reading path {input_path}\")\n\nms_reader = mr.MERTISDataPackReader(input_dir=input_path, output_dir=output_path, log_level=log_level)\n\nprint(f'MERTISDataPackReader initialized with input directory: {ms_reader.input_dir}')\nprint(f'Output directory: {ms_reader.output_dir}')\nprint(f'Log level: {ms_reader.log_level}')\n\n2024-11-25 16:00:21,499|1472475|INFO|input_dir=PosixPath('../data/bcmer_tm_all_START-20200409T000000_END-20200410T000000_CRE-20240717T132010-ParamEventBootSciHK-short/cal')\n\n\nReading path ../data/bcmer_tm_all_START-20200409T000000_END-20200410T000000_CRE-20240717T132010-ParamEventBootSciHK-short/cal\nMERTISDataPackReader initialized with input directory: ../data/bcmer_tm_all_START-20200409T000000_END-20200410T000000_CRE-20240717T132010-ParamEventBootSciHK-short/cal\nOutput directory: /tmp\nLog level: INFO\n\n\nShow Files in Input Directory\n\nms_reader.show_files()\n\nAll files in input_dir :\n\n\nCounter({'.tdat': 1, '.dat': 2, '.fits': 1, '.xml': 3})\n\n\n\nAll files in input_dir matching \\d{8}:\n\n\nCounter({'mer_cal_sc_tis': 3, 'mer_cal_hk_extended': 2, 'mer_cal_hk_default': 2})\n\n\n\nList File Types\n\nms_reader.listfiletypes()\n\n{\n    'hk_default': ['mer_cal_hk_default_20200409_20200409.dat'],\n    'hk_extended': ['mer_cal_hk_extended_20200409_20200409.dat'],\n    'sc_tis': ['mer_cal_sc_tis_20200409_20200409_1.fits'],\n    'sc_tir': [],\n    'sc_tis_ql': [],\n    'sc_tir_ql': []\n}\n\n\n\n{'hk_default': 1, 'hk_extended': 1, 'sc_tis': 1, 'sc_tir': 0, 'sc_tis_ql': 0, 'sc_tir_ql': 0}\n\n\n\nCollect Data\n\nms_reader.data_collector()\n\nprint(f'Collected data keys: {ms_reader.collect_data.keys()}')\nfor key, value in ms_reader.collect_data.items():\n    print(f'{key}: {len(value)} files collected')\n\nReading filetype: hk_default from mer_cal_hk_default_20200409_20200409\nReading filetype: hk_extended from mer_cal_hk_extended_20200409_20200409\nReading filetype: tis from mer_cal_sc_tis_20200409_20200409_1\nCollected data keys: dict_keys(['hk_default', 'hk_extended', 'tis'])\nhk_default: 1 files collected\nhk_extended: 1 files collected\ntis: 1 files collected\n\n\nAssemble Data\n\nms_reader.data_assembler(verbose=True)\n\n\n\n\nReading filetype: tis from \n../data/bcmer_tm_all_START-20200409T000000_END-20200410T000000_CRE-20240717T132010-ParamEventBootSciHK-short/cal/me\nr_cal_sc_tis_20200409_20200409_1.fits\n\n\n\n\n\n\n\n\n\nn_wav=40 # generic wavelengths : not precise enough for scientific analysis!\n|    | tis_stem                           |   finite(geo) |   geo.size |\n|---:|:-----------------------------------|--------------:|-----------:|\n|  0 | mer_cal_sc_tis_20200409_20200409_1 |           672 |      11000 |\nIndices of measurements targets (HK_STAT_TIS_DATA_ACQ_TARGET):\nspace_index.shape=(21,)\nbb7_index.shape=(0,)\nbb3_index.shape=(1,)\nplanet_index.shape=(0,)\nCollected data statistics:\nNumber of TIS files: 1\nNumber of HK files: 2\nNumber of TIR files: 0\nNumber of TIS QL files: 0\nNumber of TIR QL files: 0\n\n\nVerify the Assembled Data\n\nprint(f'Geometry data keys: {ms_reader.geom_ls.keys()}')\nprint(f'Frames data keys: {ms_reader.frames.keys()}')\nprint(f'Wavelengths data keys: {ms_reader.wavelengths.keys()}')\nprint(f'MERTIS TIS metadata keys: {ms_reader.mertis_tis_metadata.keys()}')\nprint(f'Space index shape: {ms_reader.space_index.shape}')\nprint(f'BB7 index shape: {ms_reader.bb7_index.shape}')\nprint(f'BB3 index shape: {ms_reader.bb3_index.shape}')\nprint(f'Planet index shape: {ms_reader.planet_index.shape}')\n\nGeometry data keys: dict_keys(['mer_cal_sc_tis_20200409_20200409_1'])\nFrames data keys: dict_keys(['mer_cal_sc_tis_20200409_20200409_1'])\nWavelengths data keys: dict_keys(['mer_cal_sc_tis_20200409_20200409_1'])\nMERTIS TIS metadata keys: dict_keys(['mer_cal_sc_tis_20200409_20200409_1'])\nSpace index shape: (21,)\nBB7 index shape: (0,)\nBB3 index shape: (1,)\nPlanet index shape: (0,)"
  }
]